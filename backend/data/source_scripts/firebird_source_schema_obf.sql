
/* ---- Firebird Source Schema with Obfuscated Column Names ---- */

CREATE TABLE STAFF (
    STF_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMP_FULLNM VARCHAR(200),
    EMP_ROLECD VARCHAR(50),
    HRLY_RT DECIMAL(10,2),
    HIRE_DT DATE,
    EMAIL_ADDR VARCHAR(200)
);

CREATE TABLE CLIENTS_SRC (
    CLT_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    CLT_NM VARCHAR(200),
    CLT_TYP_CD CHAR(1), -- I, C, G
    INDSTRY VARCHAR(100),
    ONBRD_DT DATE,
    PRM_CNTCT VARCHAR(200),
    PRM_CNTCT_EMAIL VARCHAR(200)
);

CREATE TABLE PROJECTS (
    PRJ_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    CLT_ID INTEGER,
    PRJ_TITLE VARCHAR(200),
    PRAC_AREA VARCHAR(100),
    RESP_STF INTEGER,
    OPN_DT DATE,
    CLS_DT DATE,
    FOREIGN KEY (CLT_ID) REFERENCES CLIENTS_SRC(CLT_ID),
    FOREIGN KEY (RESP_STF) REFERENCES STAFF(STF_ID)
);

CREATE TABLE TIMESHEETS (
    TMS_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PRJ_ID INTEGER,
    STF_ID INTEGER,
    WRK_DT DATE,
    WRK_HRS DECIMAL(6,2),
    BILL_RT DECIMAL(10,2),
    NOTES_TXT VARCHAR(500),
    BILL_FLG CHAR(1),
    FOREIGN KEY (PRJ_ID) REFERENCES PROJECTS(PRJ_ID),
    FOREIGN KEY (STF_ID) REFERENCES STAFF(STF_ID)
);

CREATE TABLE BILLING (
    INV_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    CLT_ID INTEGER,
    INV_NO VARCHAR(50),
    INV_DT DATE,
    DUE_DT DATE,
    STAT_CD VARCHAR(20),
    TOT_AMT DECIMAL(12,2),
    FOREIGN KEY (CLT_ID) REFERENCES CLIENTS_SRC(CLT_ID)
);

CREATE TABLE BILLING_ITEMS (
    ITM_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    INV_ID INTEGER,
    TMS_ID INTEGER,
    DESC_TXT VARCHAR(500),
    QTY_VAL DECIMAL(10,2),
    UNIT_RT DECIMAL(10,2),
    LN_TOT DECIMAL(12,2),
    FOREIGN KEY (INV_ID) REFERENCES BILLING(INV_ID),
    FOREIGN KEY (TMS_ID) REFERENCES TIMESHEETS(TMS_ID)
);

CREATE TABLE RECEIPTS (
    RCPT_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    INV_ID INTEGER,
    RCV_DT DATE,
    AMT_VAL DECIMAL(12,2),
    MTHD_CD VARCHAR(50),
    FOREIGN KEY (INV_ID) REFERENCES BILLING(INV_ID)
);

CREATE TABLE VENDORS_SRC (
    VND_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    VND_NM VARCHAR(200),
    VND_TYP VARCHAR(100),
    CNTCT_INFO VARCHAR(200)
);

CREATE TABLE EXPENSES_SRC (
    EXP_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    VND_ID INTEGER,
    PRJ_ID INTEGER,
    EXP_DT DATE,
    EXP_AMT DECIMAL(12,2),
    EXP_DESC VARCHAR(500),
    FOREIGN KEY (VND_ID) REFERENCES VENDORS_SRC(VND_ID),
    FOREIGN KEY (PRJ_ID) REFERENCES PROJECTS(PRJ_ID)
);

CREATE TABLE TRUST_LEDGER (
    TRST_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    CLT_ID INTEGER,
    BNK_NM VARCHAR(200),
    ACCT_NO VARCHAR(50),
    TXN_DT DATE,
    TXN_TYP VARCHAR(20),
    AMT_VAL DECIMAL(12,2),
    MEMO_TXT VARCHAR(500),
    FOREIGN KEY (CLT_ID) REFERENCES CLIENTS_SRC(CLT_ID)
);

CREATE TABLE GL_TRANSACTIONS (
    GL_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TXN_DT DATE,
    ACCT_CD VARCHAR(20),
    DESC_TXT VARCHAR(500),
    REF_TYP VARCHAR(50),
    REF_ID INTEGER,
    AMT_VAL DECIMAL(12,2),
    FISC_YM VARCHAR(7)
);

CREATE TABLE STAFF_PERMISSIONS (
    PERM_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    STF_ID INTEGER,
    RESRC_NM VARCHAR(100),
    ACCS_LVL VARCHAR(50),
    FOREIGN KEY (STF_ID) REFERENCES STAFF(STF_ID)
);

CREATE TABLE AUDIT_CHANGE_LOG (
    LG_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    USR_ID INTEGER,
    ACTN_TYP VARCHAR(50),
    TBL_NM VARCHAR(100),
    RCRD_ID INTEGER,
    TS_VAL TIMESTAMP,
    FOREIGN KEY (USR_ID) REFERENCES STAFF(STF_ID)
);

CREATE TABLE REG_REPORTS (
    RPT_ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    RPT_TYP VARCHAR(100),
    FLNG_DT DATE,
    PREP_BY INTEGER,
    SUB_TO VARCHAR(200),
    FOREIGN KEY (PREP_BY) REFERENCES STAFF(STF_ID)
);
